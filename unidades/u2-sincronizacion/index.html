<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../u1-introduccion/">
      
      
        <link rel="next" href="../u3-gramatica/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Unidad 2 - Apunte Programación Concurrente</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
     

<!-- Google site verification (reemplaza TOKEN_AQUI si te lo dieron) -->

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S6ECQ3P6X4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-S6ECQ3P6X4");
</script>

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="../..favicon.ico">

  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sincronizacion-basada-en-memoria-comparida-sincronizacion-y-semaforos" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Apunte Programación Concurrente" class="md-header__button md-logo" aria-label="Apunte Programación Concurrente" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apunte Programación Concurrente
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Unidad 2
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/nicopinera/concurrente" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Apunte Programación Concurrente" class="md-nav__button md-logo" aria-label="Apunte Programación Concurrente" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    Apunte Programación Concurrente
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nicopinera/concurrente" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../materia-apunte/temario/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Temario
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Unidades
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Unidades
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u1-introduccion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Unidad 2
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 2
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#terminos-clave-de-la-concurrencia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Términos Clave de la Concurrencia
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-de-procesos-concurrentes-y-memoria-compartida" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Procesos concurrentes y memoria compartida
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursos-de-java-para-sincronizar-threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recursos de Java para Sincronizar threads
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bloques-synchronized" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bloques Synchronized
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lock-asociado-a-los-objetos-java" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lock asociado a los objetos Java
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metodo-synchronized" class="md-nav__link">
    <span class="md-ellipsis">
      
        Método synchronized
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consideraciones-sobre-metodos-synchronized" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consideraciones sobre métodos synchronized
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursos-de-java-para-sincronizar-threads_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recursos de Java para sincronizar threads
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definicion-de-semaforo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definición de semáforo
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Definición de semáforo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#valores-de-un-semaforo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Valores de un semáforo
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u3-gramatica/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u4-bases_redes_petri/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 4
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u5-propiedades_redes_petri/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 5
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u6-monitor-concurrencia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u7-regex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 7
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u8-Apuntes-practicos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 8
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../u9-intro-java/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unidad 9
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../materia-apunte/preguntas_coloqui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preguntas Coloquio
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#terminos-clave-de-la-concurrencia" class="md-nav__link">
    <span class="md-ellipsis">
      
        Términos Clave de la Concurrencia
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-de-procesos-concurrentes-y-memoria-compartida" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Procesos concurrentes y memoria compartida
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursos-de-java-para-sincronizar-threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recursos de Java para Sincronizar threads
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bloques-synchronized" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bloques Synchronized
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lock-asociado-a-los-objetos-java" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lock asociado a los objetos Java
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metodo-synchronized" class="md-nav__link">
    <span class="md-ellipsis">
      
        Método synchronized
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consideraciones-sobre-metodos-synchronized" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consideraciones sobre métodos synchronized
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursos-de-java-para-sincronizar-threads_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recursos de Java para sincronizar threads
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definicion-de-semaforo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definición de semáforo
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Definición de semáforo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#valores-de-un-semaforo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Valores de un semáforo
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="sincronizacion-basada-en-memoria-comparida-sincronizacion-y-semaforos">Sincronizacion basada en memoria comparida: Sincronizacion y Semaforos</h1>
<h2 id="terminos-clave-de-la-concurrencia">Términos Clave de la Concurrencia</h2>
<ul>
<li>Las operaciones atómicas son aquellas operaciones que siempre se ejecutan hasta terminas todas. O todos se ejecutan juntos o ninguno de ellos se ejecuta. Si una operación es atómica entonces no puede estar parcialmente completa, esta competa o no comenzó.</li>
<li>Los recursos compartidos pueden conducir a un comportamiento inesperado o erróneo, por lo que las partes del programa donde se acceden al recurso compartido deben protegerse de manera que se evite el acceso concurrente. Esta sección protegida es la sección critica o región critica. No puede ser ejecutado por más de un proceso/hilo a la vez.</li>
<li>La exclusión mutua es una propiedad para el control de la concurrencia para prevenir las condiciones de carrera. Es requisito de que un hilo de ejecución nunca entre en su sección critica al mismo tiempo que otro hilo está ejecutando.</li>
<li>Condiciones de carrera: Cuando el resultado de la ejecución de varios hilos concurrentes puede ser correcto o incorrecto dependiendo como se entrelacen los hilos. El problema aparece cuando varios hilos hacen ciclos de modificación de una variable compartida (lectura + modificación + escritura)</li>
<li>Deadlock o punto muerto: Es un estado en el que cada miembro de un grupo de procesos/hilos está esperando otro miembro, incluido el mismo, tome medidas (enviar un mensaje o liberar el bloqueo)</li>
<li>Livelock: se produce cuando dos o más procesos repiten continuamente la misma interacción en respuesta a cambios en los otros procesos sin realizar ningún trabajo útil. Estos procesos no están en estado de espera y se ejecutan simultáneamente.</li>
<li>Inanición o starvation: es un problema donde un proceso se le niega perpetuamente recursos para procesar su trabajo, puede ser causado por errores en algoritmos, fugas de recursos e intencionalmente a través de un ataque de denegación de servicio.</li>
</ul>
<h2 id="gestion-de-procesos-concurrentes-y-memoria-compartida">Gestión de Procesos concurrentes y memoria compartida</h2>
<p>Si los diferentes hilos de un programa concurrente tienen acceso a variables globales o secciones de memoria comunes, la transferencia de datos a través de ella es una vía habitual de comunicación y sincronización entre ellos. Las primitivas para la programación concurrente basada en memoria compartida resuelven los siguientes problemas: Sincronización entre procesos y Exclusión mutua.</p>
<ul>
<li>Secciones criticas: Son mecanismos de nivel medio de abstracción orientados a su implementación en el contexto de un lenguaje y que permiten la ejecución de un bloque de sentencias de forma segura</li>
<li>Semáforos: Los semáforos tienen una variable que no es negativa y se comparte entre hilos, se utiliza para resolver el problema de la sección crítica y logra la sincronización del proceso en entornos de multiprocesamiento. Java proporciona la clase Semaphore en el paquete “java.util.concurrent” que implementa este mecanismo</li>
<li>Monitores: Son módulos de alto nivel de abstracción orientados a la gestión de recursos que van a ser usados concurrentemente por otra clase</li>
</ul>
<h2 id="recursos-de-java-para-sincronizar-threads">Recursos de Java para Sincronizar threads</h2>
<p>Todos los objetos tienen un bloqueo asociado, lock o cerrojo que puede ser adquirido y liberado mediante el uso de métodos y sentencias synchronized. La sincronización fuerza a que la ejecución de los dos hilos sea mutuamente exclusiva en el tiempo. Existen dos mecanismos de bloqueo:</p>
<ul>
<li>Métodos synchronized (exclusión mutua): Función con el atributo de Sincronización, permite que un solo hilo la ejecute por vez</li>
<li>Bloques synchronized (regiones criticas): Bloques que utilizan un lock de un objeto para ingresar.</li>
</ul>
<h2 id="bloques-synchronized">Bloques Synchronized</h2>
<p>Es el mecanismo para implementar regiones críticas en java para métodos synchronized (exclusión mutua) o para bloques synchronized (regiones criticas) Synchronized puede ser ejecutado con el uso del lock de un objeto (this o explicito otro objeto). En ese caso solo se ejecuta si se obtiene el lock asociado al objeto. Se utiliza en un entorno concurrente y cuando el objeto es explicito, este es definido con el fin de usar su lock y preferentemente es private. La sincronización fuerza a que la ejecución de los dos hilos sea mutuamente exclusiva en el tiempo.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Bloques synchronized</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">(){</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"Closing accounting"</span><span class="p">);</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">totalAmmount</span><span class="p">;</span>
<span class="w">    </span><span class="kd">synchronized</span><span class="p">(</span><span class="k">this</span><span class="p">){</span>
<span class="w">        </span><span class="n">totalAmmount</span><span class="o">=</span><span class="n">cash</span><span class="p">;</span>
<span class="w">        </span><span class="n">cash</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cm">/*</span>
<span class="cm">    Lock explicito</span>
<span class="cm">        synchronized(controlCars){</span>
<span class="cm">            totalAmmount=cash;</span>
<span class="cm">            cash=0;</span>
<span class="cm">        }</span>
<span class="cm">    */</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">printf</span><span class="p">(</span><span class="s">"The total ammount is : %d"</span><span class="p">,</span><span class="n">totalAmmount</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Metodos Syncronized</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">recoger</span><span class="p">(){</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">disponible</span><span class="p">){</span>
<span class="w">        </span><span class="k">try</span><span class="p">{</span>
<span class="w">            </span><span class="n">wait</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="n">InterruptedException</span><span class="w"> </span><span class="n">ex</span><span class="p">){}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">disponible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="n">notify</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">contenido</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="lock-asociado-a-los-objetos-java">Lock asociado a los objetos Java</h2>
<p>Cada objeto derivado de la clase object (esto es, prácticamente todos) tienen asociado un elemento de sincronización o lock intrínseco, que afecta a la ejecución de los métodos definidos como synchronized en el objeto:</p>
<ul>
<li>Cuando un objeto ejecuta un método synchronized, toma el lock y cuando termina de ejecutarlo lo libera</li>
<li>Cuando un thread tiene tomado el lock ningún otro thread puede ejecutar ningún otro método synchronized por el mismo objeto</li>
<li>El thread que ejecuta un método synchronized de un objeto cuyo lock se encuentra tomado, se suspende hasta que el objeto es liberado y se le concede el acceso
  Cada clase java derivada de object tiene también un mecanismo de lock asociado a ella que es independiente del asociado a los objetos de esa clase y que afecta a los procedimientos estáticos declarados synchronized.</li>
</ul>
<h2 id="metodo-synchronized">Método synchronized</h2>
<p>Los métodos de una clase java se pueden declarar como synchronized. Esto significa que se garantiza que se ejecutara con régimen de exclusión mutua respecto de otro método del mismo objeto que también lo sea. Si el método synchronized es estático (static), el lock al que hace referencia es de clase y no de objeto por lo que se hace en exclusión mutua con cualquier otro método estático synchronized de la misma clase.</p>
<h2 id="consideraciones-sobre-metodos-synchronized">Consideraciones sobre métodos synchronized</h2>
<ul>
<li>El lock es tomado por el thread, por lo que mientras lo tengan tomado, por lo que mientras un thread tiene tomado el lock de un objeto puede acceder a otro método synchronized del mismo objeto.</li>
<li>El lock es por cada instancia del objeto</li>
<li>Los métodos de clase (static) también pueden ser synchronized.</li>
<li>Por cada clase hay un lock y es relativo a todos los métodos synchronized de la clase</li>
<li>Este lock no afecta al acceso a los métodos synchronized de los objetos que son instancia de la clase</li>
<li>Cuando una clase se extiende y un método se sobrescribe, este se puede definir como synchronized o no, con independencia de cómo era y como sigue siendo el método de la clase madre.</li>
</ul>
<h2 id="recursos-de-java-para-sincronizar-threads_1">Recursos de Java para sincronizar threads</h2>
<p>Todos los objetos tienen un bloqueo asociado. Los hilos pueden comunicarse entre sí a través de los métodos definidos en la clase Object y solo se pueden llamar desde un contexto sincronizado. Estos métodos son básicos y engloban los conceptos más importantes. Están definidos e implementados en la clase object:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">wait</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">interruptedexception</span><span class="p">;</span>
</code></pre></div>
<p>le dice al hilo de llamada que abandone el bloqueo y se vaya a dormir hasta que algún otro hilo ingrese al mismo monitor y llame notify(). Libera el bloqueo antes de esperar y vuelve a adquirir el bloqueo antes de regresar de dormir. Está estrechamente integrado con el bloque de sincronización, utilizando como una función que no está disponible directamente desde el mecanismo de sincronización. Espera indefinida hasta que reciba una notificación.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">wait</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">timeout</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">interuptedexception</span><span class="p">;</span>
</code></pre></div>
<p>El thread que ejecuta el método se suspende hasta que, recibe una notificación o transcurre el timeout establecido en el argumento. Wait (0) representa una espera indefinida hasta que llegue la notificación.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="nf">wait</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">timeout</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nanos</span><span class="p">);</span>
</code></pre></div>
<p>Wait en el que el tiempo de timeout es $1000000*timeout + nanos$ nanosegundos</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">notify</span><span class="w"> </span><span class="p">();</span>
</code></pre></div>
<p>Despierta un solo hilo que invoco wait() el mismo objeto. Cabe señalar que las llamadas en notify () en realidad no ceden el bloqueo de un recurso. Le dice a un hilo en espera que ese hilo puede despertarse. Sin embargo, el bloqueo no se abandona hasta que el bloqueo sincronizado del notificador se ha completado. Notifica al objeto un cambio de estado, esta notificación es transferida a solo uno de los threads que esperan (han ejecutado un wait) sobre el objeto. No se puede especificar a cuál de los objetos que esperan en el objeto será despertado.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">nofityall</span><span class="w"> </span><span class="p">();</span>
</code></pre></div>
<p>despierta a todos los hilos que llamaron a wait() al mismo objeto. Notifica a todos los threads que esperan (han ejecutado un wait) sobre el objeto.</p>
<p>Todos son métodos de la clase object. Solo se pueden invocar por el thread propietario del lock. En caso contrario lanzara la excepción “IllegalMonitorStateExcepcion”</p>
<h2 id="definicion-de-semaforo">Definición de semáforo</h2>
<p>Un semáforo es un mecanismo de más alto nivel que synchronized. Es un tipo de objeto y tiene un contador que protege el acceso a uno o más recursos compartidos. Puede controlar el acceso a uno o más recursos que no necesariamente están en el mismo bloque. No posee Ownership o no tiene dueño</p>
<p>Un semáforo como cualquier tipo de datos, queda definido por: Conjunto de valores que se le pueden asignar y un conjunto de operaciones que se le pueden aplicar. También tiene asociada una lista/cola de procesos en la que se incluyen los procesos suspendidos a la espera de su cambio de estado. Los mismos son herramientas básicas de la programación concurrente y son proporcionados por la mayoría de los lenguajes de programación.</p>
<h3 id="valores-de-un-semaforo">Valores de un semáforo</h3>
<p>En función del rango de valores que puede tomar los semáforos se clasifican en:</p>
<ul>
<li>Semáforos binarios: pueden tomar solo valores 0 y 1. <code>var mutex: BinSemaphore;</code></li>
<li>Semáforos generales: Pueden tomar cualquier valor natural, entero no negativo. “var escribiendo: Semaphore”. Tiene los siguientes métodos <code>acquire (); reléase ()</code></li>
</ul>
<p><code>semáforo = 0 -&gt; lock cerrado. | semáforo&gt; 0 -&gt; lock abierto.</code></p>
<p>Es posible demostrar que un semáforo general se puede implementar utilizando semáforos binarios. Los sistemas suelen ofrecer como componente primitivo semáforos generales y su uso lo convierte de hecho en semáforo binario.</p>
<ul>
<li>Para declarar un semaphore:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">Semaphore</span><span class="w"> </span><span class="n">semaphore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Semaphore</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>Cuando un hilo quiere acceder a uno de los recursos compartidos primero debe adquirir el semáforo: <code>semaphore.acquire();</code></li>
<li>Cuando el hilo ha terminado de usar el recurso compartido debe liberar el semáforo con el que libera el recurso: <code>semaphore.release();</code></li>
</ul>
<p>Si el contador interno del semáforo es mayor que 0 el semáforo disminuye el contador y permite el acceso al recurso compartido. Un contador mayor que 0 implica que hay recursos que pueden ser utilizados por lo que el hilo puede acceder y utilizar uno de ellos.</p>
<p>Si el contador es 0, el semáforo pone el hilo a dormir hasta que el contador sea mayor que 0. Un valor de 0 en el contador significa que todos los recursos compartidos están siendo utilizados así que el hilo que quiera usar uno de ellos debe esperar hasta que uno este libre</p>
<hr>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>